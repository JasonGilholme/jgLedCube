language: cpp
compiler: gcc

os: linux
dist: trusty
sudo: required

env:
  - TARGET_HARDWARE=PC
  - TARGET_HARDWARE=ARDUINO

before_install:
 # PC Dependencies ===============================================================================
 - sudo apt-get -qq update
 - sudo apt-get install -y libgtest-dev
 - sudo apt-get install libboost1.55-all-dev
 - cd /usr/src/gtest
 - sudo cmake .
 - sudo cmake --build .
 - sudo mv libg* /usr/local/lib/
 - cd -
 # ARDUINO Dependencies ======================================================================================
 - sudo apt-get install -qq gcc-avr binutils-avr avr-libc
 - sudo apt-get install arduino arduino-core
 - export PATH=$PATH:/usr/bin:/usr/local/bin

before_script:
 - mkdir build && cd build
 - cmake -DTARGET_HARDWARE=$TARGET_HARDWARE ..

script:
 - make
 - if [[ "$TARGET_HARDWARE" = "PC" ]]; then jgLedCube/pc/PC_tests; fi
